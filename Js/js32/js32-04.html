<!DOCTYPE html>
<html lang="en">
<head>
    <title>할 일 목록 만들기(todo-list)</title>
    <script>
        document.addEventListener("DOMContentLoaded",()=>{
            const h1 = document.createElement("h1");
            const input = document.createElement("input");
            const button = document.createElement("button");
            const div = document.createElement("div");

            document.body.append(h1, input, button, div);

            input.setAttribute("id","todo");
            button.setAttribute("id","add-button");
            div.setAttribute("id","todo-list");
            h1.innerHTML = '할 일 목록';
            button.innerHTML = '추가하기';


            /* 354p 실행 결과 보고 알아서 작성해보기. */
            function auto(){
                const checkbox = document.createElement("input");
                const write = document.createElement('span');
                const clearButton = document.createElement("button");
                const br = document.createElement("br");

                input.value!=0?document.body.append(checkbox,write,clearButton,br):alert('다시 입력하세요.');

                checkbox.setAttribute("type","checkbox");
                write.innerHTML = input.value;
                clearButton.innerHTML = '제거하기';

                function removing(){
                    document.body.removeChild(checkbox);
                    document.body.removeChild(write);
                    document.body.removeChild(clearButton);
                    document.body.removeChild(br)
                }

                checkbox.addEventListener("change",(event)=>{
                    let state = event.currentTarget.checked;
                    write.style.textDecoration=state?"line-through":"";
                    state?clearButton.addEventListener("click",removing):clearButton.removeEventListener("click",removing);
                })
                /* 체크 활성화 되면 제거 가능. */


                // clearButton.addEventListener("click",removing);
                /* 그냥 제거 가능. */
            }

            
            button.addEventListener("click",auto);
        })
    </script>
</head>
<body>
    
</body>
</html>